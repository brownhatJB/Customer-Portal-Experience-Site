<template>
    <template if:true={isLoaded}>
        <section class="profile-wrapper">

            <!-- Header -->
            <header class="profile-header">
                <h1>Profile</h1>
                <div class="profile-name-line">
                    <template if:true={contactName}>
                        <span class="rule"></span>
                        <span><p class="profile-name">{contactName}</p></span>
                    </template>
                </div>
                <div class="edit-btn-section">
                    <template if:false={isEditMode}>
                            <button class="edit-btn" onclick={enableEdit}>
                                Edit Profile
                            </button>
                    </template>
                </div>
            </header>

            <!-- VIEW MODE -->
            <template if:false={isEditMode}>
                <lightning-record-view-form
                    object-api-name="Contact"
                    record-id={contactId}>

                    <div class="profile-grid">
                        <div class="card">
                            <h2>Personal Info</h2>

                            <lightning-output-field field-name="FirstName"></lightning-output-field>
                            <lightning-output-field field-name="LastName"></lightning-output-field>
                            <lightning-output-field field-name="Email"></lightning-output-field>
                            <lightning-output-field field-name="MobilePhone"></lightning-output-field>
                            <lightning-output-field field-name="Nationality__c"></lightning-output-field>
                        </div>

                        <div class="card">
                            <h2>Address</h2>

                            <lightning-output-field field-name="MailingStreet"></lightning-output-field>
                            <lightning-output-field field-name="MailingCity"></lightning-output-field>
                            <lightning-output-field field-name="MailingState"></lightning-output-field>
                            <lightning-output-field field-name="MailingCountry"></lightning-output-field>
                            <lightning-output-field field-name="MailingPostalCode"></lightning-output-field>
                        </div>
                    </div>
                </lightning-record-view-form>
            </template>

            <!-- EDIT MODE -->
            <template if:true={isEditMode}>
                <lightning-record-edit-form
                    object-api-name="Contact"
                    record-id={contactId}
                    onsuccess={handleSuccess}
                    onerror={handleError}>

                    <div class="profile-grid">
                        <div class="card">
                            <h2>Personal Info</h2>

                            <lightning-input-field field-name="FirstName"></lightning-input-field>
                            <lightning-input-field field-name="LastName"></lightning-input-field>
                            <lightning-input-field field-name="Email"></lightning-input-field>
                            <lightning-input-field field-name="MobilePhone"></lightning-input-field>
                            <lightning-input-field field-name="Nationality__c"></lightning-input-field>
                        </div>

                        <div class="card">
                            <h2>Address</h2>

                            <lightning-input-field field-name="MailingStreet"></lightning-input-field>
                            <lightning-input-field field-name="MailingCity"></lightning-input-field>
                            <lightning-input-field field-name="MailingState"></lightning-input-field>
                            <lightning-input-field field-name="MailingCountry"></lightning-input-field>
                            <lightning-input-field field-name="MailingPostalCode"></lightning-input-field>
                        </div>
                    </div>

                    <div class="actions">
                        <button
                            type="submit"
                            class="save-btn">
                            Save
                        </button>

                        <button
                            onclick={cancelEdit}
                            class="cancel-btn">Cancel</button>
                    </div>
                </lightning-record-edit-form>
            </template>

        </section>
    </template>
</template>
